<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>WellnessApp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  
</head>
<body>
  <!-- Demo Banner -->
  <div id="demoBanner" class="demo-banner">
    <div class="demo-banner__content">
      <span class="demo-banner__icon">ğŸ¯</span>
      <div class="demo-banner__text">
        <strong>Modo Demo</strong> &mdash; Inicia sesiÃ³n con
        <code>demo@wellness.app</code> / <code>Demo2024!</code>
      </div>
      <button class="demo-banner__close" onclick="this.parentElement.parentElement.style.display='none'" aria-label="Cerrar">&times;</button>
    </div>
  </div>

  <!-- Theme Toggle Button -->
  <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
    <span class="icon-sun">â˜€ï¸</span>
    <span class="icon-moon">ğŸŒ™</span>
  </button>

  <div class="gradient"></div>
  <div class="app">

    <!-- LOGIN -->
    <section id="view-login" class="view view--active">
      <div class="auth-card">
        <div class="auth-avatar"><span class="icon">ğŸ‘¤</span></div>
        <h1>Bienvenido de vuelta</h1>
        <p class="auth-subtitle">Inicia sesiÃ³n para continuar con tu bienestar</p>
        <form id="loginForm" class="auth-form">
          <label class="field">
            <span>Correo electrÃ³nico</span>
            <input type="email" id="loginEmail" placeholder="tÃº@correo.com" required>
          </label>
          <label class="field">
            <span>ContraseÃ±a</span>
            <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
          </label>
          <div class="forgot-password-link">
            <button type="button" class="link" data-switch="forgot-password">Â¿Olvidaste tu contraseÃ±a?</button>
          </div>
          <button type="submit" class="btn btn--primary">Iniciar sesiÃ³n</button>
          <p id="loginStatus" class="status"></p>
          
        </form>

        <div class="auth-divider">
          <span>o continÃºa con</span>
        </div>

        <button type="button" id="googleLoginBtn" class="btn-google-custom">
          <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          <span>Continuar con Google</span>
        </button>
        <div id="googleLogin" class="google-login-container google-hidden"></div>

       

        <p class="auth-switch">Â¿No tienes una cuenta?
          <button type="button" class="link" data-switch="register">RegÃ­strate aquÃ­</button>
        </p>
      </div>
    </section>

    <!-- REGISTER -->
    <section id="view-register" class="view">
      <div class="auth-card">
        <div class="auth-avatar"><span class="icon">ğŸ†•</span></div>
        <h1>Crear cuenta</h1>
        <p class="auth-subtitle">Ãšnete para comenzar a monitorear tu bienestar</p>
        <form id="registerForm" class="auth-form">
          <label class="field">
            <span>Nombre completo</span>
            <input type="text" id="registerName" placeholder="Tu nombre">
          </label>
          <label class="field">
            <span>Correo electrÃ³nico</span>
            <input type="email" id="registerEmail" placeholder="tÃº@correo.com" required>
          </label>
          <label class="field">
            <span>Edad</span>
            <input type="number" id="registerAge" placeholder="18" min="18" max="100">
          </label>
          <label class="field">
            <span>Nivel educativo</span>
            <select id="registerEducation">
              <option value="">Selecciona nivel</option>
              <option>Secundaria</option>
              <option>Bachillerato</option>
              <option>Universidad</option>
              <option>Postgrado</option>
            </select>
          </label>
          <label class="field">
            <span>ContraseÃ±a</span>
            <input type="password" id="registerPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
          </label>
          <label class="field">
            <span>Confirmar contraseÃ±a</span>
            <input type="password" id="registerConfirm" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
          </label>
          <button type="submit" class="btn btn--primary">Crear cuenta</button>
          <p id="registerStatus" class="status"></p>
          
       


        </form>
        <div class="divider">O regÃ­strate con</div>
        <button type="button" id="googleRegisterBtn" class="btn-google-custom">
          <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          <span>Registrarse con Google</span>
        </button>
        <div id="googleLoginRegister" class="google-hidden"></div>


        <p class="auth-switch">Â¿Ya tienes una cuenta?
          <button type="button" class="link" data-switch="login">Inicia sesiÃ³n aquÃ­</button>
        </p>
      </div>
    </section>

    <!-- FORGOT PASSWORD -->
    <section id="view-forgot-password" class="view">
      <div class="auth-card">
        <div class="auth-avatar"><span class="icon">ğŸ”‘</span></div>
        <h1>Recuperar contraseÃ±a</h1>
        <p class="auth-subtitle">Te enviaremos un enlace para restablecer tu contraseÃ±a</p>
        <form id="forgotPasswordForm" class="auth-form">
          <label class="field">
            <span>Correo electrÃ³nico</span>
            <input type="email" id="forgotEmail" placeholder="tÃº@correo.com" required>
          </label>
          <button type="submit" class="btn btn--primary">Enviar enlace</button>
          <p id="forgotPasswordStatus" class="status"></p>
        </form>
        <p class="auth-switch">
          <button type="button" class="link" data-switch="login">â† Volver al inicio de sesiÃ³n</button>
        </p>
      </div>
    </section>

    <!-- RESET PASSWORD -->
    <section id="view-reset-password" class="view">
      <div class="auth-card">
        <div class="auth-avatar"><span class="icon">ğŸ”</span></div>
        <h1>Nueva contraseÃ±a</h1>
        <p class="auth-subtitle">Ingresa tu nueva contraseÃ±a</p>
        <form id="resetPasswordForm" class="auth-form">
          <label class="field">
            <span>Nueva contraseÃ±a</span>
            <input type="password" id="resetNewPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required minlength="6">
          </label>
          <label class="field">
            <span>Confirmar contraseÃ±a</span>
            <input type="password" id="resetConfirmPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
          </label>
          <button type="submit" class="btn btn--primary">Restablecer contraseÃ±a</button>
          <p id="resetPasswordStatus" class="status"></p>
        </form>
        <div id="resetPasswordSuccess" class="hidden">
          <div class="success-message">
            <span class="success-icon">âœ…</span>
            <h3>Â¡ContraseÃ±a actualizada!</h3>
            <p>Ya puedes iniciar sesiÃ³n con tu nueva contraseÃ±a</p>
            <button type="button" class="btn btn--primary" data-switch="login">Ir a iniciar sesiÃ³n</button>
          </div>
        </div>
        <div id="resetPasswordError" class="hidden">
          <div class="error-message">
            <span class="error-icon">âŒ</span>
            <h3>Enlace invÃ¡lido</h3>
            <p>Este enlace ha expirado o ya fue utilizado</p>
            <button type="button" class="btn btn--primary" data-switch="forgot-password">Solicitar nuevo enlace</button>
          </div>
        </div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section id="view-dashboard" class="view">
      <header class="topbar">
        <div>
          <h2 id="dashboardGreeting">Hola</h2>
          <p class="topbar-date" id="dashboardDate"></p>
        </div>
        <div class="topbar-actions">
          <button class="btn btn--icon" id="btnOpenSettings" title="ConfiguraciÃ³n">âš™ï¸</button>
          <button class="btn btn--ghost hidden" id="btnOpenAdmin">Admin</button>
          <button class="btn btn--ghost" id="btnLogout">Cerrar sesiÃ³n</button>
        </div>
      </header>

      <section class="hero-card">
        <div>
          <p class="hero-subtitle">Tu bienestar es importante</p>
          <h3>Check-in de Bienestar</h3>
          <p class="hero-description">Toma 2 minutos para cuidar tu salud mental y emocional.</p>
          <button class="btn btn--primary" id="btnStartGad7">Empezar ahora</button>
          <span class="hero-points">+10 puntos al completar</span>
        </div>
        <div class="hero-illustration">ğŸ’«</div>
      </section>

      <!-- Mood Tracker Section -->
      <section class="mood-tracker" id="moodTracker">
        <div class="mood-tracker__header">
          <h3>Â¿CÃ³mo te sientes hoy?</h3>
          <p class="mood-tracker__subtitle">Un check-in rÃ¡pido para seguir tu estado emocional</p>
        </div>
        <div class="mood-tracker__options" id="moodOptions">
          <button class="mood-btn" data-score="1" data-emoji="ğŸ˜¢" aria-label="Muy mal">
            <span class="mood-btn__emoji">ğŸ˜¢</span>
            <span class="mood-btn__label">Muy mal</span>
          </button>
          <button class="mood-btn" data-score="2" data-emoji="ğŸ˜”" aria-label="Mal">
            <span class="mood-btn__emoji">ğŸ˜”</span>
            <span class="mood-btn__label">Mal</span>
          </button>
          <button class="mood-btn" data-score="3" data-emoji="ğŸ˜" aria-label="Neutral">
            <span class="mood-btn__emoji">ğŸ˜</span>
            <span class="mood-btn__label">Neutral</span>
          </button>
          <button class="mood-btn" data-score="4" data-emoji="ğŸ˜Š" aria-label="Bien">
            <span class="mood-btn__emoji">ğŸ˜Š</span>
            <span class="mood-btn__label">Bien</span>
          </button>
          <button class="mood-btn" data-score="5" data-emoji="ğŸ˜„" aria-label="Muy bien">
            <span class="mood-btn__emoji">ğŸ˜„</span>
            <span class="mood-btn__label">Muy bien</span>
          </button>
        </div>
        <div class="mood-tracker__notes hidden" id="moodNotesPanel">
          <textarea id="moodNotes" placeholder="Â¿QuÃ© estÃ¡ pasando? (opcional)" maxlength="500"></textarea>
          <div class="mood-tags" id="moodTagsPanel">
            <span class="mood-tags__label" id="moodTagsLabel">Â¿QuÃ© influyÃ³ en tu dÃ­a? (opcional)</span>
            <div class="mood-tags__options" id="moodTagsOptions">
              <!-- Tags will be rendered dynamically based on mood -->
            </div>
          </div>
          <div class="sleep-tracker" id="sleepTrackerPanel">
            <span class="sleep-tracker__label">ğŸŒ™ Â¿CÃ³mo dormiste anoche? (opcional)</span>
            <div class="sleep-tracker__inputs">
              <div class="sleep-input sleep-input--wheel">
                <label>Horas</label>
                <div class="sleep-wheel-container">
                  <button type="button" class="sleep-wheel-btn sleep-wheel-up" id="sleepWheelUp">â–²</button>
                  <div class="sleep-wheel-display" id="sleepWheelDisplay">
                    <span class="sleep-wheel-value" id="sleepHoursValue">--</span>
                    <span class="sleep-wheel-unit">hrs</span>
                  </div>
                  <button type="button" class="sleep-wheel-btn sleep-wheel-down" id="sleepWheelDown">â–¼</button>
                </div>
              </div>
              <div class="sleep-input">
                <label>Calidad</label>
                <div class="sleep-quality-options" id="sleepQualityOptions">
                  <button type="button" class="sleep-quality-btn" data-quality="1" title="Muy mal">ğŸ˜«</button>
                  <button type="button" class="sleep-quality-btn" data-quality="2" title="Mal">ğŸ˜´</button>
                  <button type="button" class="sleep-quality-btn" data-quality="3" title="Regular">ğŸ˜</button>
                  <button type="button" class="sleep-quality-btn" data-quality="4" title="Bien">ğŸ˜Š</button>
                  <button type="button" class="sleep-quality-btn" data-quality="5" title="Excelente">ğŸŒŸ</button>
                </div>
              </div>
            </div>
          </div>
          <div class="mood-tracker__actions">
            <button class="btn btn--ghost" id="btnCancelMood">Cancelar</button>
            <button class="btn btn--primary" id="btnSaveMood">Guardar</button>
          </div>
        </div>
        <div class="mood-tracker__logged hidden" id="moodLoggedPanel">
          <div class="mood-logged">
            <span class="mood-logged__emoji" id="loggedMoodEmoji">ğŸ˜Š</span>
            <span class="mood-logged__text">Ya registraste tu estado de Ã¡nimo hoy</span>
          </div>
        </div>
        <div class="mood-tracker__history" id="moodHistoryPreview">
          <div class="mood-history-dots" id="moodHistoryDots"></div>
        </div>

        <!-- Mood Calendar -->
        <div class="mood-calendar mood-calendar--compact" id="moodCalendar">
          <div class="mood-calendar__header">
            <button class="mood-calendar__nav" id="btnPrevMonth" aria-label="Mes anterior">â—€</button>
            <h4 class="mood-calendar__title" id="calendarTitle">Esta semana</h4>
            <button class="mood-calendar__nav" id="btnNextMonth" aria-label="Mes siguiente">â–¶</button>
            <button class="mood-calendar__toggle" id="btnToggleCalendar" aria-label="Expandir calendario">
              <span class="toggle-expand">Ver mes â–¼</span>
              <span class="toggle-collapse">Ocultar â–²</span>
            </button>
          </div>
          <div class="mood-calendar__weekdays">
            <span>Lu</span><span>Ma</span><span>Mi</span><span>Ju</span><span>Vi</span><span>Sa</span><span>Do</span>
          </div>
          <div class="mood-calendar__grid" id="calendarGrid">
            <!-- Days will be rendered by JavaScript -->
          </div>
        </div>
      </section>

      <section class="insights" id="insightsPanel">
        <article class="insight-card insight-card--empty" id="cardGad7">
          <header class="insight-head">
            <div>
              <h3>Seguimiento GAD-7</h3>
              <p class="insight-subtitle">Niveles de ansiedad en el tiempo</p>
            </div>
            <span class="insight-badge">Ansiedad</span>
          </header>
          <div class="insight-body">
            <svg id="chartGad7" class="insight-chart" viewBox="0 0 100 40"></svg>
            <div class="insight-empty">AÃºn no tienes resultados registrados.</div>
            <dl class="insight-stats">
              <div><dt>Evaluaciones</dt><dd id="gadCount">0</dd></div>
              <div><dt>Promedio</dt><dd id="gadAverage">0</dd></div>
              <div><dt>Tendencia</dt><dd id="gadTrend">â€”</dd></div>
            </dl>
            <p class="insight-last" id="gadLast">Cuando completes evaluaciones verÃ¡s aquÃ­ el detalle mÃ¡s reciente.</p>
          </div>
        </article>

        <article class="insight-card insight-card--empty" id="cardPhq9">
          <header class="insight-head">
            <div>
              <h3>Seguimiento PHQ-9</h3>
              <p class="insight-subtitle">Indicadores de estado de Ã¡nimo</p>
            </div>
            <span class="insight-badge">Ãnimo</span>
          </header>
          <div class="insight-body">
            <svg id="chartPhq9" class="insight-chart" viewBox="0 0 100 40"></svg>
            <div class="insight-empty">Registra tus primeros resultados para ver tu progreso.</div>
            <dl class="insight-stats">
              <div><dt>Evaluaciones</dt><dd id="phqCount">0</dd></div>
              <div><dt>Promedio</dt><dd id="phqAverage">0</dd></div>
              <div><dt>Tendencia</dt><dd id="phqTrend">â€”</dd></div>
            </dl>
            <p class="insight-last" id="phqLast">Tus resultados mÃ¡s recientes aparecerÃ¡n aquÃ­ al completar evaluaciones.</p>
          </div>
        </article>
      </section>

      <!-- Mini Stats Summary (always visible) -->
      <section class="mini-stats" id="miniStatsSection">
        <article class="mini-stat" id="streakCard">
          <span class="mini-stat__icon">ğŸ“…</span>
          <span class="mini-stat__value" id="statCurrentStreak">0</span>
          <span class="mini-stat__label">dÃ­as de racha</span>
        </article>
        <article class="mini-stat">
          <span class="mini-stat__icon">ğŸ˜Š</span>
          <span class="mini-stat__value" id="statAvgMood">--</span>
          <span class="mini-stat__label">Ã¡nimo promedio</span>
        </article>
        <article class="mini-stat">
          <span class="mini-stat__icon">ğŸ“Š</span>
          <span class="mini-stat__value" id="statTotalEntries">0</span>
          <span class="mini-stat__label">registros</span>
        </article>
      </section>

      <!-- AI Insights Section -->
      <section class="ai-insights-section" id="aiInsightsSection" style="display:none">
        <div class="ai-insights-header">
          <h3>ğŸ¤– Perspectivas de IA</h3>
          <button class="btn btn--ghost btn--sm" id="btnRefreshAiInsights" title="Actualizar anÃ¡lisis">ğŸ”„</button>
        </div>

        <div class="ai-loading" id="aiInsightsLoading" style="display:none">
          <div class="ai-loading-spinner"></div>
          <p>Analizando tus datos...</p>
        </div>

        <div class="ai-error" id="aiInsightsError" style="display:none">
          <p>No se pudieron cargar los insights. <a href="#" id="btnRetryAiInsights">Reintentar</a></p>
        </div>

        <div class="ai-risk-alert" id="aiRiskAlert" style="display:none">
          <strong>âš ï¸ AtenciÃ³n:</strong>
          <span id="aiRiskMessage"></span>
        </div>

        <div class="ai-insights-grid" id="aiInsightsGrid" style="display:none">
          <article class="ai-insight-card">
            <div class="ai-insight-card__icon">ğŸ”</div>
            <h4>Patrones detectados</h4>
            <p id="aiPatterns">--</p>
          </article>
          <article class="ai-insight-card">
            <div class="ai-insight-card__icon">ğŸŒ™</div>
            <h4>SueÃ±o y Ã¡nimo</h4>
            <p id="aiSleep">--</p>
          </article>
          <article class="ai-insight-card">
            <div class="ai-insight-card__icon">ğŸ·ï¸</div>
            <h4>Tus actividades</h4>
            <p id="aiTags">--</p>
          </article>
          <article class="ai-insight-card ai-insight-card--wide">
            <div class="ai-insight-card__icon">ğŸ’¡</div>
            <h4>Recomendaciones</h4>
            <ul id="aiRecommendations" class="ai-recommendations-list"></ul>
          </article>
        </div>

        <p class="ai-disclaimer" id="aiDisclaimer" style="display:none"></p>
      </section>

      <!-- Achievements Section -->
      <section class="achievements-section" id="achievementsSection">
        <div class="achievements-header">
          <h3>Logros</h3>
          <span class="achievements-count" id="achievementsCount">0/0</span>
        </div>
        <div class="achievements-grid" id="achievementsGrid">
          <!-- Achievements will be rendered here by JS -->
        </div>
      </section>

      <section class="quick-links">
        <article class="quick-card">
          <div class="quick-icon">ğŸ“ˆ</div>
          <div>
            <h4>Mi Progreso</h4>
            <p>Visualiza tus tendencias y estadÃ­sticas detalladas.</p>
          </div>
          <button class="btn btn--light" id="btnOpenProgress">Ver progreso</button>
        </article>

        <article class="quick-card">
          <div class="quick-icon">ğŸŒ¬ï¸</div>
          <div>
            <h4>RespiraciÃ³n</h4>
            <p>Ejercicios guiados para reducir el estrÃ©s y la ansiedad.</p>
          </div>
          <button class="btn btn--light" id="btnOpenBreathing">Comenzar</button>
        </article>

        <article class="quick-card quick-card--action">
          <div class="quick-icon">ğŸ©º</div>
          <div>
            <h4>Evaluaciones clÃ­nicas</h4>
            <p>Explora las evaluaciones PHQ-9 y GAD-7 para monitorear tu progreso.</p>
          </div>
          <button class="btn btn--light" id="btnStartPhq9">Iniciar PHQ-9</button>
        </article>

        <article class="quick-card">
          <div class="quick-icon">ğŸ§°</div>
          <div>
            <h4>Recursos</h4>
            <p>Tips y herramientas Ãºtiles seleccionadas por especialistas.</p>
          </div>
          <button class="btn btn--light" id="btnOpenResources">Ver recursos</button>
        </article>

        <article class="quick-card quick-card--action">
          <div class="quick-icon">ğŸ“š</div>
          <div>
            <h4>Historial de evaluaciones</h4>
            <p>Consulta tus resultados previos y notas personales.</p>
          </div>
          <button class="btn btn--light" id="btnOpenHistory">Ver historial</button>
        </article>
      </section>

      <section id="historyPanel" class="history hidden">
        <div class="history-header">
          <div class="history-header-main">
            <h3>Tu historial reciente</h3>
            <button class="link" id="btnCloseHistory">Ocultar</button>
          </div>

          <div class="history-filters">
            <div class="history-filter">
              <span class="history-filter-label">Tipo</span>
              <select id="historyFilterType">
                <option value="">Todos</option>
                <option value="GAD7">GAD-7</option>
                <option value="PHQ9">PHQ-9</option>
              </select>
            </div>

            <div class="history-filter">
              <span class="history-filter-label">Rango</span>
              <select id="historyFilterRange">
                <option value="all">Todo</option>
                <option value="7">Ãšltimos 7 dÃ­as</option>
                <option value="30">Ãšltimos 30 dÃ­as</option>
              </select>
            </div>
          </div>
        </div>

        <ul id="historyList" class="history-list"></ul>
      </section>

      <!-- Progress Panel -->
      <section id="progressPanel" class="progress-panel hidden">
        <div class="progress-panel__header">
          <h3>Tu Progreso</h3>
          <button class="link" id="btnCloseProgress">Ocultar</button>
        </div>

        <!-- Stats Summary Cards -->
        <div class="stats-grid">
          <article class="stat-card">
            <div class="stat-card__icon">ğŸ“Š</div>
            <div class="stat-card__content">
              <span class="stat-card__value" id="statTotalEntriesPanel">0</span>
              <span class="stat-card__label">Registros totales</span>
            </div>
          </article>
          <article class="stat-card" id="streakCardPanel">
            <div class="stat-card__icon">ğŸ“…</div>
            <div class="stat-card__content">
              <span class="stat-card__value" id="statCurrentStreakPanel">0</span>
              <span class="stat-card__label">Racha actual</span>
            </div>
          </article>
          <article class="stat-card">
            <div class="stat-card__icon">ğŸ†</div>
            <div class="stat-card__content">
              <span class="stat-card__value" id="statLongestStreak">0</span>
              <span class="stat-card__label">Mejor racha</span>
            </div>
          </article>
          <article class="stat-card">
            <div class="stat-card__icon">ğŸ“ˆ</div>
            <div class="stat-card__content">
              <span class="stat-card__value" id="statTrendPanel">--</span>
              <span class="stat-card__label">Tendencia</span>
            </div>
          </article>
        </div>

        <!-- Mood Trend Chart -->
        <div class="chart-container">
          <header class="chart-header">
            <h3>Tendencia de Estado de Ãnimo</h3>
            <div class="chart-controls">
              <button class="chart-period-btn active" data-period="7">7 dÃ­as</button>
              <button class="chart-period-btn" data-period="30">30 dÃ­as</button>
              <button class="chart-period-btn" data-period="90">3 meses</button>
            </div>
          </header>
          <div class="chart-wrapper">
            <canvas id="moodTrendChart"></canvas>
          </div>
          <div class="chart-empty hidden" id="moodChartEmpty">
            <p>Registra tu estado de Ã¡nimo para ver tu tendencia</p>
          </div>
        </div>

        <!-- Assessment Comparison Chart -->
        <div class="chart-container">
          <header class="chart-header">
            <h3>Comparativa de Evaluaciones</h3>
            <p class="chart-subtitle">Ãšltimas 5 evaluaciones GAD-7 y PHQ-9</p>
          </header>
          <div class="chart-wrapper">
            <canvas id="assessmentChart"></canvas>
          </div>
          <div class="chart-empty hidden" id="assessmentChartEmpty">
            <p>Completa evaluaciones GAD-7 o PHQ-9 para ver la comparativa</p>
          </div>
        </div>
      </section>

    </section> <!-- CIERRE CORRECTO DEL DASHBOARD -->


    <!-- ASSESSMENT -->
    <section id="view-assessment" class="view">
      <header class="assessment-header">
        <button class="back" id="btnBackToDashboard">â†</button>
        <div>
          <p class="assessment-title" id="assessmentTitle"></p>
          <p class="assessment-step" id="assessmentStep"></p>
        </div>
        <div class="progress">
          <div class="progress-bar" id="assessmentProgress"></div>
        </div>
      </header>

      <section class="question-card" id="questionCard"></section>

      <footer class="assessment-footer">
        <button class="btn btn--ghost" id="btnPrevQuestion">Anterior</button>
        <div class="assessment-points">+10 puntos al completar</div>
        <button class="btn btn--primary" id="btnNextQuestion">Siguiente</button>
      </footer>
    </section>


    <!-- RESULT -->
    <section id="view-result" class="view">
      <div class="result-card">
        <div class="result-icon">âœ¨</div>
        <h2 id="resultTitle"></h2>
        <p id="resultSummary"></p>

        <ul id="resultDetails" class="result-details"></ul>

        <section class="result-analytics" id="resultAnalytics">
          <div class="result-chart-panel">
            <h3>Tus respuestas</h3>
            <div class="result-chart" id="resultAnswersChart"></div>
            <div class="result-chart-scale"><span>0</span><span>1</span><span>2</span><span>3</span></div>
          </div>

          <div class="result-stats-panel">
            <h3>EstadÃ­sticas clave</h3>
            <ul class="result-stats">
              <li><span>Puntaje promedio por pregunta</span><strong id="resultAverage"></strong></li>
              <li><span>Respuesta mÃ¡s alta</span><strong id="resultMax"></strong></li>
              <li><span>Ãreas a trabajar</span><strong id="resultFocus"></strong></li>
            </ul>
          </div>
        </section>

        <!-- AI Assessment Analysis -->
        <section class="ai-assessment-section" id="aiAssessmentSection" style="display:none">
          <h3>ğŸ¤– AnÃ¡lisis de IA</h3>

          <div class="ai-loading" id="aiAssessmentLoading" style="display:none">
            <div class="ai-loading-spinner"></div>
            <p>Generando anÃ¡lisis personalizado...</p>
          </div>

          <div class="ai-error" id="aiAssessmentError" style="display:none">
            <p>No se pudo generar el anÃ¡lisis.</p>
          </div>

          <div id="aiAssessmentContent" style="display:none">
            <div class="ai-assessment-block">
              <h4>AnÃ¡lisis detallado</h4>
              <p id="aiAssessmentAnalysis"></p>
            </div>
            <div class="ai-assessment-block">
              <h4>ComparaciÃ³n histÃ³rica</h4>
              <p id="aiAssessmentComparison"></p>
            </div>
            <div class="ai-assessment-columns">
              <div class="ai-assessment-block ai-assessment-block--concern" id="aiConcernBlock" style="display:none">
                <h4>âš ï¸ Ãreas de preocupaciÃ³n</h4>
                <ul id="aiConcernList"></ul>
              </div>
              <div class="ai-assessment-block ai-assessment-block--improve" id="aiImproveBlock" style="display:none">
                <h4>âœ… Ãreas de mejora</h4>
                <ul id="aiImproveList"></ul>
              </div>
            </div>
            <div class="ai-assessment-block">
              <h4>ğŸ’¡ Recomendaciones</h4>
              <ul id="aiAssessmentRecommendations" class="ai-recommendations-list"></ul>
            </div>
            <p class="ai-disclaimer" id="aiAssessmentDisclaimer"></p>
          </div>
        </section>

        <div class="result-actions">
          <button class="btn btn--primary" id="btnResultDashboard">Volver al inicio</button>
          <button class="btn btn--light" id="btnResultHistory">Ver historial</button>
        </div>
      </div>
    </section>


    <!-- ADMIN -->
    <section id="view-admin" class="view">
      <header class="topbar">
        <div>
          <h2>Panel de AdministraciÃ³n</h2>
          <p class="topbar-date">Herramientas solo para administradores</p>
        </div>
        <div class="admin-actions">
          <button class="btn btn--ghost" id="btnBackFromAdmin">Volver</button>
        </div>
      </header>

      <div class="admin-grid">
        <article class="admin-card">
          <h3>Promover usuario a ADMIN</h3>
          <form id="formPromote">
            <label class="field">
              <span>ID de usuario</span>
              <input type="number" id="promoteUserId" min="1" required>
            </label>
            <button type="submit" class="btn btn--primary">Promover</button>
            <p id="promoteStatus" class="status"></p>
          </form>
        </article>

        <article class="admin-card">
          <h3>Token actual (payload)</h3>
          <pre id="jwtPayload">â€”</pre>
          <button class="btn btn--light" id="btnRefreshPayload">Refrescar payload</button>
        </article>
      </div>
    </section>


    <!-- BREATHING EXERCISES -->
    <section id="view-breathing" class="view hidden">
      <header class="topbar">
        <div>
          <h2>Ejercicios de RespiraciÃ³n</h2>
          <p class="topbar-date">TÃ©cnicas para calmar la ansiedad</p>
        </div>
        <button class="btn btn--ghost" id="btnBackFromBreathing">Volver</button>
      </header>

      <div class="breathing-container">
        <!-- Exercise Selection -->
        <div class="breathing-exercises" id="breathingExercises">
          <h3>Elige una tÃ©cnica</h3>
          <div class="breathing-cards">
            <button class="breathing-card" data-exercise="box">
              <span class="breathing-card__icon">â¬œ</span>
              <span class="breathing-card__name">RespiraciÃ³n Cuadrada</span>
              <span class="breathing-card__desc">4-4-4-4 segundos</span>
              <span class="breathing-card__time">~4 min</span>
            </button>
            <button class="breathing-card" data-exercise="478">
              <span class="breathing-card__icon">ğŸŒ™</span>
              <span class="breathing-card__name">TÃ©cnica 4-7-8</span>
              <span class="breathing-card__desc">Inhala 4, retÃ©n 7, exhala 8</span>
              <span class="breathing-card__time">~5 min</span>
            </button>
            <button class="breathing-card" data-exercise="relaxing">
              <span class="breathing-card__icon">ğŸŒŠ</span>
              <span class="breathing-card__name">RespiraciÃ³n Relajante</span>
              <span class="breathing-card__desc">Inhala 4, exhala 6</span>
              <span class="breathing-card__time">~3 min</span>
            </button>
          </div>
        </div>

        <!-- Active Exercise -->
        <div class="breathing-active hidden" id="breathingActive">
          <div class="breathing-visual">
            <div class="breathing-circle" id="breathingCircle">
              <span class="breathing-instruction" id="breathingInstruction">PrepÃ¡rate...</span>
            </div>
            <div class="breathing-timer" id="breathingTimer">0:00</div>
          </div>
          <div class="breathing-info">
            <span class="breathing-exercise-name" id="breathingExerciseName">RespiraciÃ³n Cuadrada</span>
            <span class="breathing-cycle" id="breathingCycle">Ciclo 1 de 4</span>
          </div>
          <div class="breathing-controls">
            <button class="btn btn--ghost" id="btnStopBreathing">Detener</button>
            <button class="btn btn--primary" id="btnPauseBreathing">Pausar</button>
          </div>
        </div>

        <!-- Completion -->
        <div class="breathing-complete hidden" id="breathingComplete">
          <div class="breathing-complete__icon">ğŸ‰</div>
          <h3>Â¡Bien hecho!</h3>
          <p>Completaste el ejercicio de respiraciÃ³n</p>
          <div class="breathing-complete__stats">
            <span id="breathingCompleteDuration">4 minutos</span>
            <span id="breathingCompleteCycles">4 ciclos</span>
          </div>
          <div class="breathing-complete__actions">
            <button class="btn btn--ghost" id="btnBreathingAgain">Repetir</button>
            <button class="btn btn--primary" id="btnBreathingDone">Terminar</button>
          </div>
        </div>
      </div>
    </section>


    <!-- RESOURCES -->
    <section id="view-resources" class="view">
      <header class="topbar">
        <div>
          <h2>Recursos</h2>
          <p class="topbar-date">Materiales recomendados por especialistas</p>
        </div>
        <button class="btn btn--ghost" id="btnBackFromResources">Volver</button>
      </header>

      <div id="resourceUploader" class="admin-card hidden">
        <h3>Subir recurso</h3>
        <form id="formResourceUpload" enctype="multipart/form-data">
          <label class="field"><span>TÃ­tulo</span><input id="resTitle" required></label>
          <label class="field"><span>DescripciÃ³n</span><input id="resDesc"></label>
          <label class="field"><span>CategorÃ­a</span><input id="resCat"></label>
          <label class="field"><span>Archivo</span><input type="file" id="resFile"></label>
          <button type="submit" class="btn btn--primary">Publicar</button>
          <p id="resUploadStatus" class="status"></p>
        </form>
      </div>

      <section class="history" style="margin:16px 0;">
        <div class="history-header">
          <h3>Filtrar recursos</h3>
        </div>
        <div class="history-list" style="display:flex; gap:16px; flex-wrap:wrap;">
          <label class="field" style="flex:1;">
            <span>BÃºsqueda</span>
            <input type="search" id="resourceSearch">
          </label>
          <label class="field" style="flex:1;">
            <span>CategorÃ­a</span>
            <select id="resourceFilterCategory">
              <option value="">Todas</option>
              <option value="Ansiedad">Ansiedad</option>
              <option value="DepresiÃ³n">DepresiÃ³n</option>
              <option value="SueÃ±o">SueÃ±o</option>
              <option value="EstrÃ©s">EstrÃ©s</option>
              <option value="GuÃ­as">GuÃ­as</option>
            </select>
          </label>
        </div>
      </section>

      <div id="resourcesList" class="insights"></div>
    </section>

    <!-- SETTINGS -->
    <section id="view-settings" class="view">
      <header class="topbar">
        <div>
          <h2>ConfiguraciÃ³n</h2>
          <p class="topbar-date">Gestiona tu cuenta y preferencias</p>
        </div>
        <button class="btn btn--ghost" id="btnBackFromSettings">Volver</button>
      </header>

      <div class="settings-container">
        <!-- Account Info -->
        <section class="settings-section">
          <h3 class="settings-section__title">ğŸ‘¤ InformaciÃ³n de Cuenta</h3>
          <div class="settings-card">
            <div class="settings-field">
              <label>Nombre</label>
              <span id="settingsName">--</span>
            </div>
            <div class="settings-field">
              <label>Correo electrÃ³nico</label>
              <span id="settingsEmail">--</span>
            </div>
            <div class="settings-field">
              <label>Edad</label>
              <span id="settingsAge">--</span>
            </div>
            <div class="settings-field">
              <label>Nivel educativo</label>
              <span id="settingsEducation">--</span>
            </div>
            <div class="settings-field">
              <label>Miembro desde</label>
              <span id="settingsMemberSince">--</span>
            </div>
            <div class="settings-field">
              <label>Tipo de cuenta</label>
              <span id="settingsRole" class="badge">Usuario</span>
            </div>
          </div>
        </section>

        <!-- Preferences -->
        <section class="settings-section">
          <h3 class="settings-section__title">ğŸ¨ Preferencias</h3>
          <div class="settings-card">
            <div class="settings-option">
              <div class="settings-option__info">
                <span class="settings-option__label">Tema oscuro</span>
                <span class="settings-option__desc">Cambia la apariencia de la aplicaciÃ³n</span>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="settingsThemeToggle">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </section>

        <!-- Data & Privacy -->
        <section class="settings-section">
          <h3 class="settings-section__title">ğŸ“Š Datos y Privacidad</h3>
          <div class="settings-card">
            <div class="settings-option settings-option--button">
              <div class="settings-option__info">
                <span class="settings-option__label">Exportar mis datos</span>
                <span class="settings-option__desc">Descarga todos tus registros en formato JSON</span>
              </div>
              <button class="btn btn--light" id="btnExportData">Exportar</button>
            </div>
            <div class="settings-divider"></div>
            <div class="settings-option settings-option--button">
              <div class="settings-option__info">
                <span class="settings-option__label settings-option__label--danger">Eliminar cuenta</span>
                <span class="settings-option__desc">Esta acciÃ³n es irreversible y eliminarÃ¡ todos tus datos</span>
              </div>
              <button class="btn btn--danger-outline" id="btnDeleteAccount">Eliminar</button>
            </div>
          </div>
        </section>

        <!-- Session -->
        <section class="settings-section">
          <h3 class="settings-section__title">ğŸ” SesiÃ³n</h3>
          <div class="settings-card">
            <div class="settings-option settings-option--button">
              <div class="settings-option__info">
                <span class="settings-option__label">Cambiar contraseÃ±a</span>
                <span class="settings-option__desc">RecibirÃ¡s un enlace por correo para cambiar tu contraseÃ±a</span>
              </div>
              <button class="btn btn--light" id="btnChangePassword">Enviar enlace</button>
            </div>
            <div class="settings-divider"></div>
            <div class="settings-option settings-option--button">
              <div class="settings-option__info">
                <span class="settings-option__label">Cerrar sesiÃ³n</span>
                <span class="settings-option__desc">Sal de tu cuenta en este dispositivo</span>
              </div>
              <button class="btn btn--ghost" id="btnSettingsLogout">Cerrar sesiÃ³n</button>
            </div>
          </div>
        </section>

        <p class="settings-version">WellnessApp v1.0.0</p>
      </div>
    </section>

    <!-- Delete Account Modal -->
    <div id="deleteAccountBackdrop" class="modal-backdrop hidden"></div>
    <div id="deleteAccountModal" class="settings-modal hidden">
      <div class="settings-modal__header">
        <h3>âš ï¸ Eliminar cuenta</h3>
        <button class="modal-close" id="btnCloseDeleteModal">Ã—</button>
      </div>
      <div class="settings-modal__content">
        <p class="settings-modal__warning">Esta acciÃ³n eliminarÃ¡ permanentemente:</p>
        <ul class="settings-modal__list">
          <li>Tu perfil y datos personales</li>
          <li>Todos tus registros de Ã¡nimo</li>
          <li>Historial de evaluaciones</li>
          <li>Logros y estadÃ­sticas</li>
        </ul>
        <label class="field">
          <span>Escribe "ELIMINAR" para confirmar</span>
          <input type="text" id="deleteConfirmation" placeholder="ELIMINAR">
        </label>
        <p id="deleteAccountStatus" class="status"></p>
        <div class="settings-modal__actions">
          <button type="button" class="btn btn--ghost" id="btnCancelDelete">Cancelar</button>
          <button type="button" class="btn btn--danger" id="btnConfirmDelete" disabled>Eliminar mi cuenta</button>
        </div>
      </div>
    </div>

    <!-- COMING SOON -->
    <section id="view-comingsoon" class="view">
      <header class="topbar">
        <div>
          <h2>Comunidad</h2>
          <p class="topbar-date">Espacio social de WellnessApp</p>
        </div>
        <button class="btn btn--ghost" id="btnBackFromComingSoon">Volver</button>
      </header>

      <div class="hero-card" style="text-align:center; min-height:50vh;">
        <div>
          <div style="font-size:64px;">ğŸš§</div>
          <h3>Coming soonâ€¦</h3>
          <p class="hero-description">
            Estamos construyendo una experiencia para que conectes, compartas y crezcas con tu comunidad.
          </p>
          <p class="hero-points">Â¡Vuelve pronto! âœ¨</p>
        </div>
      </div>
    </section>

  </div>

  <div id="toast" class="toast"></div>

  <!-- MOOD DETAIL MODAL -->
  <div id="moodDetailBackdrop" class="modal-backdrop hidden"></div>
  <div id="moodDetailModal" class="mood-detail-modal hidden" role="dialog" aria-modal="true">
    <div class="mood-detail-modal__header">
      <h3 id="moodDetailTitle">Registro del dÃ­a</h3>
      <button id="moodDetailClose" class="modal-close">Ã—</button>
    </div>
    <div class="mood-detail-modal__content">
      <div class="mood-detail__date" id="moodDetailDate">--</div>
      <div class="mood-detail__mood">
        <span class="mood-detail__emoji" id="moodDetailEmoji">ğŸ˜Š</span>
        <span class="mood-detail__label" id="moodDetailLabel">Bien</span>
      </div>
      <div class="mood-detail__section" id="moodDetailTagsSection">
        <label>Factores:</label>
        <div class="mood-detail__tags" id="moodDetailTags"></div>
      </div>
      <div class="mood-detail__section" id="moodDetailSleepSection">
        <label>SueÃ±o:</label>
        <div class="mood-detail__sleep">
          <span id="moodDetailSleepHours">-- hrs</span>
          <span id="moodDetailSleepQuality"></span>
        </div>
      </div>
      <div class="mood-detail__section" id="moodDetailNotesSection">
        <label>Notas:</label>
        <p id="moodDetailNotes" class="mood-detail__notes">--</p>
      </div>
    </div>
    <div class="mood-detail-modal__actions">
      <button class="btn btn--ghost btn--danger" id="btnDeleteMood">Eliminar</button>
      <button class="btn btn--primary" id="btnEditMood">Editar</button>
    </div>
  </div>

  <!-- MOOD EDIT MODAL -->
  <div id="moodEditModal" class="mood-edit-modal hidden" role="dialog" aria-modal="true">
    <div class="mood-detail-modal__header">
      <h3>Editar registro</h3>
      <button id="moodEditClose" class="modal-close">Ã—</button>
    </div>
    <div class="mood-edit-modal__content">
      <div class="mood-edit__section">
        <label>Estado de Ã¡nimo</label>
        <div class="mood-edit__options" id="moodEditOptions">
          <button type="button" class="mood-edit-btn" data-score="1">ğŸ˜¢</button>
          <button type="button" class="mood-edit-btn" data-score="2">ğŸ˜•</button>
          <button type="button" class="mood-edit-btn" data-score="3">ğŸ˜</button>
          <button type="button" class="mood-edit-btn" data-score="4">ğŸ˜Š</button>
          <button type="button" class="mood-edit-btn" data-score="5">ğŸ˜„</button>
        </div>
      </div>
      <div class="mood-edit__section">
        <label>Notas</label>
        <textarea id="moodEditNotes" placeholder="Â¿QuÃ© estaba pasando?" maxlength="500"></textarea>
      </div>
      <div class="mood-edit__section">
        <label>Horas de sueÃ±o</label>
        <div class="sleep-wheel-container sleep-wheel-container--edit">
          <button type="button" class="sleep-wheel-btn" id="moodEditSleepUp">â–²</button>
          <div class="sleep-wheel-display">
            <span class="sleep-wheel-value" id="moodEditSleepValue">--</span>
            <span class="sleep-wheel-unit">hrs</span>
          </div>
          <button type="button" class="sleep-wheel-btn" id="moodEditSleepDown">â–¼</button>
        </div>
      </div>
      <div class="mood-edit__section">
        <label>Calidad del sueÃ±o</label>
        <div class="sleep-quality-options" id="moodEditQualityOptions">
          <button type="button" class="sleep-quality-btn" data-quality="1">ğŸ˜«</button>
          <button type="button" class="sleep-quality-btn" data-quality="2">ğŸ˜´</button>
          <button type="button" class="sleep-quality-btn" data-quality="3">ğŸ˜</button>
          <button type="button" class="sleep-quality-btn" data-quality="4">ğŸ˜Š</button>
          <button type="button" class="sleep-quality-btn" data-quality="5">ğŸŒŸ</button>
        </div>
      </div>
    </div>
    <div class="mood-detail-modal__actions">
      <button class="btn btn--ghost" id="btnCancelEdit">Cancelar</button>
      <button class="btn btn--primary" id="btnSaveEdit">Guardar</button>
    </div>
  </div>

  <button id="helpFab" class="fab">â”</button>
  <div id="helpBackdrop" class="help-backdrop" hidden></div>

  <!-- HELP PANEL -->
  <section id="helpPanel" class="help-panel" role="dialog" aria-modal="true" aria-labelledby="helpTitle" hidden>
    <header class="help-header">
      <h3 id="helpTitle">ğŸ’œ Ayuda y Apoyo</h3>
      <button id="helpClose" class="help-close">Ã—</button>
    </header>
    <p class="help-softmsg">ğŸŒ¿ Respira suavementeâ€¦ estÃ¡s a salvo. Todo va a estar bien.</p>
    <p class="help-subtitle">Recursos disponibles para ti</p>

    <div class="help-actions">
      <article class="help-item help-item--danger">
        <div class="help-item__icon">ğŸ“</div>
        <div class="help-item__content">
          <h4>LÃ­nea de Crisis</h4>
          <p>Apoyo inmediato 24/7</p>
        </div>
        <a href="tel:123" class="btn btn--primary help-cta">Llamar ahora</a>
      </article>

      <article class="help-item">
        <div class="help-item__icon">ğŸ“˜</div>
        <div class="help-item__content">
          <h4>Primeros pasos</h4>
          <p>CÃ³mo usar la aplicaciÃ³n</p>
        </div>
        <button id="openIntro" class="btn btn--light help-cta">Ver guÃ­a</button>
      </article>

      <article class="help-item">
        <div class="help-item__icon">ğŸ™Œ</div>
        <div class="help-item__content">
          <h4>Tips de Asesoramiento</h4>
          <p>Maneja mejor tu tiempo</p>
        </div>
        <button id="openCoaching" class="btn btn--light help-cta">Abrir tips</button>
      </article>
    </div>

    <h4 class="help-tips-title">ğŸ’¡ Tips RÃ¡pidos</h4>
    <ul class="help-tips">
      <li>ğŸ« <strong>Respira profundo:</strong> Inhala 4, mantÃ©n 7, exhala 8.</li>
      <li>ğŸ§  <strong>SeÃ±ales de alerta:</strong> irritabilidad constante o falta de sueÃ±o.</li>
      <li>ğŸ¤ <strong>Pide ayuda:</strong> Hablar con alguien siempre ayuda.</li>
      <li>ğŸš¨ <strong>En crisis:</strong> contacta emergencias de tu zona.</li>
    </ul>
  </section>

  <section id="introPanel" class="mini-panel" hidden>
    <header class="mini-header">
        <h3>ğŸ“˜ Primeros Pasos</h3>
        <button data-close class="mini-close">Ã—</button>
    </header>
    <ul class="mini-list">
      <li>âœ… Completa tu primer check-in de bienestar.</li>
      <li>âœ… Revisa tu historial y progreso emocional.</li>
      <li>âœ… Explora recursos y herramientas Ãºtiles.</li>
      <li>âœ… Ajusta notificaciones segÃºn tus preferencias.</li>
    </ul>
</section>

  <section id="coachingPanel" class="mini-panel" hidden>
    <header class="mini-header">
        <h3>ğŸ™Œ Tips de Asesoramiento</h3>
        <button data-close class="mini-close">Ã—</button>
    </header>
    <ul class="mini-list">
      <li>ğŸ•’ Organiza tu dÃ­a en bloques de 25 minutos.</li>
      <li>ğŸ“µ Aleja distracciones mientras estudias.</li>
      <li>â³ Haz pausas activas para evitar agotamiento.</li>
      <li>ğŸ¤¸ Estira o camina 5 minutos cada hora.</li>
    </ul>
</section>

<!-- Chart.js for data visualization -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<!-- Configuration: These values should be set via environment at deployment -->
<!-- For Docker: mount a config.js file or use envsubst to inject values -->
<script src="js/config.js"></script>
<script src="https://accounts.google.com/gsi/client" async defer></script>


  <!-- Pre-warm backend on Render free tier (cold start ~30-60s) -->
  <script>
  (function() {
    var api = (window.APP_CONFIG && window.APP_CONFIG.API_BASE_URL) || '';
    if (api && api.indexOf('localhost') === -1) {
      var el = document.createElement('div');
      el.id = 'warmup';
      el.innerHTML = '<div style="position:fixed;bottom:16px;right:16px;z-index:9998;background:#fff;border:1px solid #e0e0e0;border-radius:12px;padding:12px 18px;font-size:13px;box-shadow:0 4px 12px rgba(0,0,0,0.1);display:flex;align-items:center;gap:8px;font-family:Inter,sans-serif"><span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:#2D9596;animation:wp 1s infinite"></span> Conectando con el servidor...</div>';
      var s = document.createElement('style');
      s.textContent = '@keyframes wp{0%,100%{opacity:1}50%{opacity:.3}}';
      document.head.appendChild(s);
      document.body.appendChild(el);
      fetch(api + '/health', {mode:'cors'})
        .then(function() {
          el.innerHTML = '<div style="position:fixed;bottom:16px;right:16px;z-index:9998;background:#fff;border:1px solid #e0e0e0;border-radius:12px;padding:12px 18px;font-size:13px;box-shadow:0 4px 12px rgba(0,0,0,0.1);font-family:Inter,sans-serif">&#10003; Servidor listo</div>';
          setTimeout(function(){ el.remove(); }, 2000);
        })
        .catch(function() {
          el.querySelector('div').innerHTML = '<span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:#f59e0b;animation:wp 1s infinite"></span> El servidor estÃ¡ iniciando (~30s)...';
        });
    }
  })();
  </script>

  <script src="js/app.js"></script>

</body>
</html>
